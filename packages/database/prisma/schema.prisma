generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model UpdateHistory {
  checkedOn DateTime @default(now())
  hash      String   @id
}

model Artist {
  url                String   @id
  name               String
  bio                String?
  imageUrl           String?
  fromRelatedArtists Artist[] @relation("RelatedArtists")
  toRelatedArtists   Artist[] @relation("RelatedArtists")
  albums             Album[]
  lastUpdated        DateTime
  firstRetrieved     DateTime
  lastRetrieved      DateTime
}

model Album {
  name      String
  year      Int?
  rating    Decimal
  artist    Artist  @relation(fields: [artistUrl], references: [url])
  artistUrl String
  imageUrl  String?

  retrieved DateTime

  @@id([artistUrl, name])
}
